#include"../c/k.h"

K f(I d){ZC b[256];ZI r;S p;I s=recv(d,b+r,b+256-r,0);P(1>s,orr(""))
 for(s+=r,p=b;r=*p,p+r<b+s;p+=r)r0(k(0,".qs.am",kpn(++p,r),(K)0));
 memmove(b,p,r=b+s-p);R 0;}

K f(K x){return ki(x->i+1);}  // q calls c
K g(K x){return k(0,"1+",r1(x),0);} // c calls q


f:`a 2:(`f;1)
g:`a 2:(`g;1)
f 2
g 3